import { Meta } from '@storybook/addon-docs/blocks';
import { TabsState } from '@storybook/components';

<Meta title="Docs/ä½¿ç”¨æŒ‡å—" />

# å¿«é€Ÿå¼€å§‹

1. é¦–å…ˆå®‰è£…æœ¬æ’ä»¶

<TabsState initial="yarn">
   <div id="yarn" title="Yarn"><div>

```sh
yarn add -D storybook-addon-customize-antd-theme
```

  </div></div>
  <div id="npm" title="NPM"><div>

```sh
npm i -D storybook-addon-customize-antd-theme
```

  </div></div>
</TabsState>

2. ç„¶ååœ¨`main.js`æ³¨å†Œæ’ä»¶åï¼Œå¦å¤–å»ºè®®å¯¼å…¥æœ¬æ’ä»¶çš„ä¸€ä¸ª antd story`storybook-addon-customize-antd-theme/dist/esm/stories/index.js`

```js
// .storybook/main.js

module.exports = {
  stories: ['storybook-addon-customize-antd-theme/dist/esm/stories/index.js'],
  addons: ['storybook-addon-customize-antd-theme'],
};
```

ç°åœ¨ä½ å¯ä»¥å¯è§†åŒ–å®šåˆ¶ ant design çš„ä¸»é¢˜äº†ã€‚å½“ä½ ä¿®æ”¹äº†æœ¬æ’ä»¶é¢æ¿ä¸­ ant design less å˜é‡å€¼ï¼Œä¸Šæ–¹ canvas åŒºåŸŸçš„ ant design çš„ç»„ä»¶æ ·å¼ä¼šå³æ—¶å“åº”å˜åŒ–ï¼Œå¦‚ä¸‹å›¾ï¼š

<img src="usage.png" />

ä½ å¯ä»¥åœ¨æ’ä»¶ä¸­å¯¼å‡ºå¯¹ ant design less å˜é‡å€¼çš„ä¿®æ”¹åˆ° js æˆ– less æ–‡ä»¶(æ ¹æ®ä½ çš„é¡¹ç›®ä»¥ä½•ç§æ–¹å¼å®šåˆ¶ ant design ä¸»é¢˜ï¼Œå‚è€ƒ[ğŸ‘‰](https://ant.design/docs/react/customize-theme-cn))ã€‚

ç›¸å¯¹çš„ï¼Œä½ ä¹Ÿå¯ä»¥å¯¼å…¥åŒ…å« ant design less å˜é‡å€¼çš„ js æˆ– less æ–‡ä»¶åˆ°æœ¬æ’ä»¶ä¸­ã€‚

é»˜è®¤æœ¬æ’ä»¶ä¼šè¦†ç›–åœ¨ storybook canvas ä¸­çš„ ant design ç»„ä»¶çš„æ ·å¼ï¼Œä½ å¯ä»¥é€šè¿‡ç‚¹å‡» toolbar ä¸­æœ¬æ’ä»¶å›¾æ ‡ç¦ç”¨æœ¬æ’ä»¶ï¼Œå¦‚å›¾ï¼š

<img src="disable.png" />

### è®¾ç½® story çš„é»˜è®¤çŠ¶æ€

ä½ å¯ä»¥åœ¨ preview.js åˆå§‹åŒ–å¯¼å…¥ä¸€ä¸ª ant design ä¸»é¢˜ï¼Œåœ¨`parameters`ä¸Šè®¾ç½®å±æ€§`customizeAntdTheme`ï¼š

```js
// .storybook/preview.js

export const parameters = {
  customizeAntdTheme: {
    modifyVars: {
      'primary-color': '#ff1771',
      'border-radius-base': '20px',
    },
  },
};
```

`modifyVars` ä¹Ÿå¯ä»¥æ˜¯ less stringï¼Œä½ å¯ä»¥é€šè¿‡ webpack æ’ä»¶`raw-loader`å¯¼å…¥ä¸€ä¸ª antd design ä¸»é¢˜ less æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š

```js
// .storybook/preview.js
import themeLess from '!!raw-loader!../src/theme/theme.less';
export const parameters = {
  customizeAntdTheme: {
    modifyVars: themeLess,
  },
};
```
