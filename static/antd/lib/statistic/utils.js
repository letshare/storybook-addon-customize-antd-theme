"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatTimeStr=formatTimeStr,exports.formatCountdown=formatCountdown;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_padStart=_interopRequireDefault(require("lodash/padStart")),timeUnits=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function formatTimeStr(duration,format){var leftDuration=duration,escapeRegex=/\[[^\]]*]/g,keepList=(format.match(escapeRegex)||[]).map((function(str){return str.slice(1,-1)})),templateText=format.replace(escapeRegex,"[]"),replacedText=timeUnits.reduce((function(current,_ref){var _ref2=(0,_slicedToArray2.default)(_ref,2),name=_ref2[0],unit=_ref2[1];if(-1!==current.indexOf(name)){var value=Math.floor(leftDuration/unit);return leftDuration-=value*unit,current.replace(new RegExp("".concat(name,"+"),"g"),(function(match){var len=match.length;return(0,_padStart.default)(value.toString(),len,"0")}))}return current}),templateText),index=0;return replacedText.replace(escapeRegex,(function(){var match=keepList[index];return index+=1,match}))}function formatCountdown(value,config){var _config$format=config.format,format=void 0===_config$format?"":_config$format,target=new Date(value).getTime(),current=Date.now();return formatTimeStr(Math.max(target-current,0),format)}