"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),React=_interopRequireWildcard(require("react")),_classnames=_interopRequireDefault(require("classnames")),_omit=_interopRequireDefault(require("rc-util/lib/omit")),_EyeOutlined=_interopRequireDefault(require("@ant-design/icons/EyeOutlined")),_EyeInvisibleOutlined=_interopRequireDefault(require("@ant-design/icons/EyeInvisibleOutlined")),_configProvider=require("../config-provider"),_Input=_interopRequireDefault(require("./Input"));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var __rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},ActionMap={click:"onClick",hover:"onMouseOver"},Password=React.forwardRef((function(props,ref){var _useState=(0,React.useState)(!1),_useState2=(0,_slicedToArray2.default)(_useState,2),visible=_useState2[0],setVisible=_useState2[1],onVisibleChange=function onVisibleChange(){props.disabled||setVisible(!visible)},renderPassword=function renderPassword(_ref){var getPrefixCls=_ref.getPrefixCls,className=props.className,customizePrefixCls=props.prefixCls,customizeInputPrefixCls=props.inputPrefixCls,size=props.size,visibilityToggle=props.visibilityToggle,restProps=__rest(props,["className","prefixCls","inputPrefixCls","size","visibilityToggle"]),inputPrefixCls=getPrefixCls("input",customizeInputPrefixCls),prefixCls=getPrefixCls("input-password",customizePrefixCls),suffixIcon=visibilityToggle&&function getIcon(prefixCls){var _iconProps,action=props.action,_props$iconRender=props.iconRender,iconRender=void 0===_props$iconRender?function(){return null}:_props$iconRender,iconTrigger=ActionMap[action]||"",icon=iconRender(visible),iconProps=(_iconProps={},(0,_defineProperty2.default)(_iconProps,iconTrigger,onVisibleChange),(0,_defineProperty2.default)(_iconProps,"className","".concat(prefixCls,"-icon")),(0,_defineProperty2.default)(_iconProps,"key","passwordIcon"),(0,_defineProperty2.default)(_iconProps,"onMouseDown",(function onMouseDown(e){e.preventDefault()})),(0,_defineProperty2.default)(_iconProps,"onMouseUp",(function onMouseUp(e){e.preventDefault()})),_iconProps);return React.cloneElement(React.isValidElement(icon)?icon:React.createElement("span",null,icon),iconProps)}(prefixCls),inputClassName=(0,_classnames.default)(prefixCls,className,(0,_defineProperty2.default)({},"".concat(prefixCls,"-").concat(size),!!size)),omittedProps=(0,_extends2.default)((0,_extends2.default)({},(0,_omit.default)(restProps,["suffix","iconRender"])),{type:visible?"text":"password",className:inputClassName,prefixCls:inputPrefixCls,suffix:suffixIcon});return size&&(omittedProps.size=size),React.createElement(_Input.default,(0,_extends2.default)({ref:ref},omittedProps))};return React.createElement(_configProvider.ConfigConsumer,null,renderPassword)}));Password.defaultProps={action:"click",visibilityToggle:!0,iconRender:function iconRender(visible){return visible?React.createElement(_EyeOutlined.default,null):React.createElement(_EyeInvisibleOutlined.default,null)}},Password.displayName="Password";var _default=Password;exports.default=_default;