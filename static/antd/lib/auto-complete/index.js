"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_typeof3=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),React=_interopRequireWildcard(require("react")),_toArray=_interopRequireDefault(require("rc-util/lib/Children/toArray")),_classnames=_interopRequireDefault(require("classnames")),_omit=_interopRequireDefault(require("rc-util/lib/omit")),_select=_interopRequireDefault(require("../select")),_configProvider=require("../config-provider"),_devWarning=_interopRequireDefault(require("../_util/devWarning")),_reactNode=require("../_util/reactNode");function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof3(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var Option=_select.default.Option;function isSelectOptionOrSelectOptGroup(child){return child&&child.type&&(child.type.isSelectOption||child.type.isSelectOptGroup)}var AutoComplete=function AutoComplete(props,ref){var customizeInput,customizePrefixCls=props.prefixCls,className=props.className,children=props.children,dataSource=props.dataSource,childNodes=(0,_toArray.default)(children);if(1===childNodes.length&&(0,_reactNode.isValidElement)(childNodes[0])&&!isSelectOptionOrSelectOptGroup(childNodes[0])){var _childNodes=(0,_slicedToArray2.default)(childNodes,1);customizeInput=_childNodes[0]}var optionChildren,getInputElement=customizeInput?function(){return customizeInput}:void 0;return optionChildren=childNodes.length&&isSelectOptionOrSelectOptGroup(childNodes[0])?children:dataSource?dataSource.map((function(item){if((0,_reactNode.isValidElement)(item))return item;switch((0,_typeof2.default)(item)){case"string":return React.createElement(Option,{key:item,value:item},item);case"object":var optionValue=item.value;return React.createElement(Option,{key:optionValue,value:optionValue},item.text);default:throw new Error("AutoComplete[dataSource] only supports type `string[] | Object[]`.")}})):[],React.useEffect((function(){(0,_devWarning.default)(!("dataSource"in props),"AutoComplete","`dataSource` is deprecated, please use `options` instead."),(0,_devWarning.default)(!customizeInput||!("size"in props),"AutoComplete","You need to control style self instead of setting `size` when using customize input.")}),[]),React.createElement(_configProvider.ConfigConsumer,null,(function(_ref){var prefixCls=(0,_ref.getPrefixCls)("select",customizePrefixCls);return React.createElement(_select.default,(0,_extends2.default)({ref:ref},(0,_omit.default)(props,["dataSource"]),{prefixCls:prefixCls,className:(0,_classnames.default)("".concat(prefixCls,"-auto-complete"),className),mode:_select.default.SECRET_COMBOBOX_MODE_DO_NOT_USE,getInputElement:getInputElement}),optionChildren)}))},RefAutoComplete=React.forwardRef(AutoComplete);RefAutoComplete.Option=Option;var _default=RefAutoComplete;exports.default=_default;