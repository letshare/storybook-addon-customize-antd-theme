"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=confirm,exports.withWarn=withWarn,exports.withInfo=withInfo,exports.withSuccess=withSuccess,exports.withError=withError,exports.withConfirm=withConfirm,exports.modalGlobalConfig=modalGlobalConfig;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),React=_interopRequireWildcard(require("react")),ReactDOM=_interopRequireWildcard(require("react-dom")),_InfoCircleOutlined=_interopRequireDefault(require("@ant-design/icons/InfoCircleOutlined")),_CheckCircleOutlined=_interopRequireDefault(require("@ant-design/icons/CheckCircleOutlined")),_CloseCircleOutlined=_interopRequireDefault(require("@ant-design/icons/CloseCircleOutlined")),_ExclamationCircleOutlined=_interopRequireDefault(require("@ant-design/icons/ExclamationCircleOutlined")),_locale=require("./locale"),_ConfirmDialog=_interopRequireDefault(require("./ConfirmDialog")),_configProvider=require("../config-provider"),_devWarning=_interopRequireDefault(require("../_util/devWarning")),_destroyFns=_interopRequireDefault(require("./destroyFns"));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var __rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},defaultRootPrefixCls="";function getRootPrefixCls(){return defaultRootPrefixCls}function confirm(config){var div=document.createElement("div");document.body.appendChild(div);var currentConfig=(0,_extends2.default)((0,_extends2.default)({},config),{close:close,visible:!0});function destroy(){var unmountResult=ReactDOM.unmountComponentAtNode(div);unmountResult&&div.parentNode&&div.parentNode.removeChild(div);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var triggerCancel=args.some((function(param){return param&&param.triggerCancel}));config.onCancel&&triggerCancel&&config.onCancel.apply(config,args);for(var i=0;i<_destroyFns.default.length;i++){var fn=_destroyFns.default[i];if(fn===close){_destroyFns.default.splice(i,1);break}}}function render(_a){var okText=_a.okText,cancelText=_a.cancelText,customizePrefixCls=_a.prefixCls,props=__rest(_a,["okText","cancelText","prefixCls"]);setTimeout((function(){var runtimeLocale=(0,_locale.getConfirmLocale)(),rootPrefixCls=(0,(0,_configProvider.globalConfig)().getPrefixCls)(void 0,getRootPrefixCls()),prefixCls=customizePrefixCls||"".concat(rootPrefixCls,"-modal");ReactDOM.render(React.createElement(_ConfirmDialog.default,(0,_extends2.default)({},props,{prefixCls:prefixCls,rootPrefixCls:rootPrefixCls,okText:okText||(props.okCancel?runtimeLocale.okText:runtimeLocale.justOkText),cancelText:cancelText||runtimeLocale.cancelText})),div)}))}function close(){for(var _this=this,_len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];render(currentConfig=(0,_extends2.default)((0,_extends2.default)({},currentConfig),{visible:!1,afterClose:function afterClose(){"function"==typeof config.afterClose&&config.afterClose(),destroy.apply(_this,args)}}))}return render(currentConfig),_destroyFns.default.push(close),{destroy:close,update:function update(configUpdate){render(currentConfig="function"==typeof configUpdate?configUpdate(currentConfig):(0,_extends2.default)((0,_extends2.default)({},currentConfig),configUpdate))}}}function withWarn(props){return(0,_extends2.default)((0,_extends2.default)({icon:React.createElement(_ExclamationCircleOutlined.default,null),okCancel:!1},props),{type:"warning"})}function withInfo(props){return(0,_extends2.default)((0,_extends2.default)({icon:React.createElement(_InfoCircleOutlined.default,null),okCancel:!1},props),{type:"info"})}function withSuccess(props){return(0,_extends2.default)((0,_extends2.default)({icon:React.createElement(_CheckCircleOutlined.default,null),okCancel:!1},props),{type:"success"})}function withError(props){return(0,_extends2.default)((0,_extends2.default)({icon:React.createElement(_CloseCircleOutlined.default,null),okCancel:!1},props),{type:"error"})}function withConfirm(props){return(0,_extends2.default)((0,_extends2.default)({icon:React.createElement(_ExclamationCircleOutlined.default,null),okCancel:!0},props),{type:"confirm"})}function modalGlobalConfig(_ref){var rootPrefixCls=_ref.rootPrefixCls;(0,_devWarning.default)(!1,"Modal","Modal.config is deprecated. Please use ConfigProvider.config instead."),defaultRootPrefixCls=rootPrefixCls}